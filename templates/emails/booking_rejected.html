{% extends "emails/base_email.html" %}

{% block title %}Booking Rejected - OkPuja{% endblock %}

{% block header_title %}Booking Rejected{% endblock %}
{% block header_subtitle %}We apologize for the inconvenience{% endblock %}

{% block content %}
<!-- Rejection Icon -->
<div class="text-center mb-6">
    <div class="inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4">
        <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
    </div>
    <h2 class="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-800 mb-2">
        Booking Rejected
    </h2>
    <p class="text-gray-600 text-sm sm:text-base">
        Reference ID: <span class="font-semibold text-red-600">#{{ booking.book_id if booking else 'N/A' }}</span>
    </p>
</div>

<!-- Personal Greeting -->
<div class="bg-red-50 rounded-lg p-4 sm:p-6 mb-6 border-l-4 border-red-400">
    <p class="text-gray-800 text-sm sm:text-base lg:text-lg">
        Dear <span class="font-semibold text-red-600">{{ booking.user.first_name if booking and booking.user else 'Valued Customer' }}</span>,
    </p>
    <p class="text-gray-700 mt-2 text-sm sm:text-base leading-relaxed">
        We regret to inform you that your booking request has been rejected. This decision was made after careful consideration, and we sincerely apologize for any inconvenience this may cause. We value your interest in our spiritual services and would like to help you find alternative solutions.
    </p>
</div>

<!-- Rejected Booking Details -->
<div class="bg-white border-2 border-red-100 rounded-lg overflow-hidden mb-6 shadow-sm">
    <div class="bg-red-500 px-4 py-3">
        <h3 class="text-white font-semibold text-base sm:text-lg">Rejected Booking Details</h3>
    </div>
    
    <div class="p-4 sm:p-6">
        <div class="space-y-4 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-4">
            <!-- Service -->
            <div class="bg-gray-50 rounded-lg p-3 sm:p-4 opacity-75">
                <div class="flex items-start space-x-3">
                    <div class="flex-shrink-0">
                        <svg class="w-4 h-4 sm:w-5 sm:h-5 text-gray-500 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-xs sm:text-sm font-medium text-gray-600 mb-1">Service</p>
                        <p class="text-sm sm:text-base font-semibold text-gray-700 break-words leading-tight line-through">{{ booking.cart.service.title if booking and booking.cart else 'Service details unavailable' }}</p>
                    </div>
                </div>
            </div>

            <!-- Requested Date -->
            <div class="bg-gray-50 rounded-lg p-3 sm:p-4 opacity-75">
                <div class="flex items-start space-x-3">
                    <div class="flex-shrink-0">
                        <svg class="w-4 h-4 sm:w-5 sm:h-5 text-gray-500 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-xs sm:text-sm font-medium text-gray-600 mb-1">Requested Date</p>
                        <p class="text-sm sm:text-base font-semibold text-gray-700 line-through">{{ booking.selected_date if booking else 'Not specified' }}</p>
                    </div>
                </div>
            </div>

            <!-- Requested Time -->
            <div class="bg-gray-50 rounded-lg p-3 sm:p-4 opacity-75">
                <div class="flex items-start space-x-3">
                    <div class="flex-shrink-0">
                        <svg class="w-4 h-4 sm:w-5 sm:h-5 text-gray-500 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-xs sm:text-sm font-medium text-gray-600 mb-1">Requested Time</p>
                        <p class="text-sm sm:text-base font-semibold text-gray-700 line-through">{{ booking.selected_time if booking else 'Not specified' }}</p>
                    </div>
                </div>
            </div>

            <!-- Rejection Status -->
            <div class="bg-gradient-to-r from-red-50 to-red-100 rounded-lg p-3 sm:p-4 border border-red-200">
                <div class="flex items-start space-x-3">
                    <div class="flex-shrink-0">
                        <svg class="w-4 h-4 sm:w-5 sm:h-5 text-red-600 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-xs sm:text-sm font-medium text-red-700 mb-1">Status</p>
                        <p class="text-lg sm:text-xl font-bold text-red-800">‚ùå REJECTED</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Rejection Reasons -->
<div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 sm:p-6 mb-6 rounded-r-lg">
    <div class="flex items-start space-x-3">
        <div class="flex-shrink-0">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-yellow-400 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.864-.833-2.634 0L4.168 14.5c-.77.833.192 2.5 1.732 2.5z"></path>
            </svg>
        </div>
        <div class="flex-1">
            <h3 class="text-sm sm:text-base font-medium text-yellow-800 mb-2">Reason for Rejection</h3>
            <div class="text-xs sm:text-sm text-yellow-700 space-y-2">
                <div class="flex items-start space-x-2">
                    <span class="text-yellow-500 mt-1">‚Ä¢</span>
                    <span>{{ rejection_reason if rejection_reason else 'Requested date/time is not available' }}</span>
                </div>
                {% if additional_reasons %}
                    {% for reason in additional_reasons %}
                    <div class="flex items-start space-x-2">
                        <span class="text-yellow-500 mt-1">‚Ä¢</span>
                        <span>{{ reason }}</span>
                    </div>
                    {% endfor %}
                {% else %}
                <div class="flex items-start space-x-2">
                    <span class="text-yellow-500 mt-1">‚Ä¢</span>
                    <span>Service provider scheduling conflicts</span>
                </div>
                <div class="flex items-start space-x-2">
                    <span class="text-yellow-500 mt-1">‚Ä¢</span>
                    <span>High demand for the selected time slot</span>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Refund Information (if applicable) -->
{% if booking and booking.total_amount %}
<div class="bg-blue-50 border-l-4 border-blue-400 p-4 sm:p-6 mb-6 rounded-r-lg">
    <div class="flex items-start space-x-3">
        <div class="flex-shrink-0">
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-blue-400 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>
            </svg>
        </div>
        <div class="flex-1">
            <h3 class="text-sm sm:text-base font-medium text-blue-800 mb-2">Refund Information</h3>
            <div class="text-xs sm:text-sm text-blue-700 space-y-2">
                <div class="flex items-start space-x-2">
                    <span class="text-blue-500 mt-1">‚Ä¢</span>
                    <span>Full refund of ‚Çπ{{ booking.total_amount }} will be processed automatically</span>
                </div>
                <div class="flex items-start space-x-2">
                    <span class="text-blue-500 mt-1">‚Ä¢</span>
                    <span>Refund will be credited to your original payment method within 5-7 business days</span>
                </div>
                <div class="flex items-start space-x-2">
                    <span class="text-blue-500 mt-1">‚Ä¢</span>
                    <span>You will receive a confirmation email once the refund is processed</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- Alternative Options -->
<div class="bg-green-50 border border-green-200 rounded-lg p-4 sm:p-6 mb-6">
    <div class="text-center">
        <h3 class="text-base sm:text-lg font-semibold text-green-800 mb-3">
            <span class="inline-block mr-2">üåü</span>
            Alternative Options Available
        </h3>
        <p class="text-xs sm:text-sm text-green-700 mb-4 leading-relaxed">
            We don't want this to end your spiritual journey with us. Here are some alternatives we can offer:
        </p>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <div class="bg-white rounded-lg p-3 sm:p-4 border border-green-200">
                <div class="text-center">
                    <svg class="w-6 h-6 text-green-600 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <h4 class="text-sm font-medium text-green-800 mb-1">Choose Different Date</h4>
                    <p class="text-xs text-green-600">Select from available dates</p>
                </div>
            </div>
            <div class="bg-white rounded-lg p-3 sm:p-4 border border-green-200">
                <div class="text-center">
                    <svg class="w-6 h-6 text-green-600 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    <h4 class="text-sm font-medium text-green-800 mb-1">Similar Services</h4>
                    <p class="text-xs text-green-600">Explore related spiritual services</p>
                </div>
            </div>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 justify-center mt-4">
            <a href="#" class="inline-flex items-center justify-center px-4 py-2 bg-green-500 text-white text-xs sm:text-sm font-medium rounded-lg hover:bg-green-600 transition-colors">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                Book Alternative Date
            </a>
            <a href="#" class="inline-flex items-center justify-center px-4 py-2 bg-white border border-green-500 text-green-500 text-xs sm:text-sm font-medium rounded-lg hover:bg-green-50 transition-colors">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                Browse Services
            </a>
        </div>
    </div>
</div>

<!-- Priority Support -->
<div class="bg-purple-50 border border-purple-200 rounded-lg p-4 sm:p-6 mb-6">
    <div class="text-center">
        <h3 class="text-base sm:text-lg font-semibold text-purple-800 mb-3">
            <span class="inline-block mr-2">‚≠ê</span>
            Priority Support for You
        </h3>
        <p class="text-xs sm:text-sm text-purple-700 mb-4 leading-relaxed">
            As an apology for the inconvenience, we're offering you priority booking assistance for your next reservation.
        </p>
        <a href="#" class="inline-flex items-center justify-center px-6 py-2 bg-purple-500 text-white text-xs sm:text-sm font-medium rounded-lg hover:bg-purple-600 transition-colors">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
            </svg>
            Contact Priority Support
        </a>
    </div>
</div>

<!-- Contact Information -->
<div class="text-center bg-gray-50 rounded-lg p-4 sm:p-6 mb-6">
    <h3 class="text-base sm:text-lg font-semibold text-gray-800 mb-3">Need Personal Assistance?</h3>
    <div class="space-y-3 sm:space-y-0 sm:flex sm:justify-center sm:items-center sm:space-x-6">
        <!-- Phone -->
        <div class="flex items-center justify-center space-x-2 text-xs sm:text-sm text-gray-600">
            <svg class="w-4 h-4 text-orange-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
            </svg>
            <span class="break-all">Call us: +91-XXXXXXXXXX</span>
        </div>
        <!-- Email -->
        <div class="flex items-center justify-center space-x-2 text-xs sm:text-sm text-gray-600">
            <svg class="w-4 h-4 text-orange-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
            </svg>
            <span class="break-all">support@okpuja.com</span>
        </div>
    </div>
</div>

<!-- Apology Message -->
<div class="text-center">
    <div class="bg-gradient-to-r from-red-50 to-orange-50 rounded-lg p-4 sm:p-6">
        <p class="text-base sm:text-lg text-gray-700 mb-2 font-medium">
            üôè We sincerely apologize for this inconvenience
        </p>
        <p class="text-xs sm:text-sm text-gray-500 mb-3">
            Your spiritual journey is important to us. We're committed to finding the best alternative solution for you.
        </p>
        <p class="text-xs sm:text-sm text-orange-600 font-medium">
            Thank you for your understanding and continued trust in OkPuja
        </p>
    </div>
</div>
{% endblock %}